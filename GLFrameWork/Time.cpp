//=============================================================================
//	タイムクラス
//	Tkahiro Kikushima
//=============================================================================

//=============================================================================
//インクルード
//=============================================================================
#include "Polygon2D.h"
#include <math.h>
#include "Texture.h"
#include "Time.h"
#include "Number2D.h"

CNumber2D* Nomber[3] = { nullptr };
//=============================================================================
//コストラクタ
//=============================================================================
CTime::CTime()
{
	_Pos.x =
		_Pos.y =
		_Pos.z = 0;

	_Rot.x =
		_Rot.y =
		_Rot.z = 0;

	x =
		y = 0;
}
//=============================================================================
//初期化
//=============================================================================
void CTime::Init(void)
{
//	CPolygon2D::Init();

	TimeCount = 0;
	Timer = 300;

	for (int i = 0; i < 3; i++)
	{
		Nomber[i] = CNumber2D::Create(VECTOR3(Pos.x+(i * 80.0f), Pos.y, Pos.z),Size);
		Nomber[i]->SetTex((CTexture::Texture(TEX_NUMBER)));
		Nomber[i]->SetColor(COLOR(0.2f,0.7f,0.2f,1.0f));
	}

}
//=============================================================================
//作成
//=============================================================================
CTime* CTime::Create(const VECTOR3& pos, const VECTOR2& size, const VECTOR3& rot, const COLOR& color)
{
	CTime* Time = new CTime();
	Time->Pos = pos;
	Time->Size = size;
	Time->Init();

	return Time;
}

//=============================================================================
//終了処理
//=============================================================================
void CTime::Uninit(void)
{
	delete this;
}
//=============================================================================
//更新
//=============================================================================
void CTime::Update(void)
{
	//CPolygon2D::AddSize(x, y);

	TimeCount++;
	if (TimeCount == 60)
	{
		Timer--;
		//制限時間経過
		if (Timer <= 0)
		{
			//終了
			Release();
		}
		TimeCount = 0;
	}
	Nomber[0]->SetNumber(Timer/100);

	Nomber[1]->SetNumber(Timer/10);

	Nomber[2]->SetNumber(Timer);

}
//=============================================================================
//描画
//=============================================================================
